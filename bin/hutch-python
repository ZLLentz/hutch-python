#!/usr/bin/env python
import argparse

import IPython

from hutch_python.load_conf import load


# Parse the user's arguments
parser = argparse.ArgumentParser(description='Launch LCLS Hutch Python')
parser.add_argument('--cfg', required=True,
                    help='Configuration yaml file')
args = parser.parse_args()

# Load objects from the configuration file
objs = load(args.cfg)

# Remove modules and other objects from the global namespace
# After this, should ONLY have IPython and objs
del argparse
del load
del args

# Install objects into the global namespace
globals().update(objs)
IPython.embed()
